class MRAnimations{constructor(){this.config={threshold:.15,rootMargin:"0px 0px -50px 0px",once:!0},this.init()}init(){this.initHeaderAnimations(),document.body.classList.contains("animations-enabled")&&(this.initScrollAnimations(),this.initBackToTop(),this.initCountdowns())}initHeaderAnimations(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{this.animateHeaderElements()}):this.animateHeaderElements()}animateHeaderElements(){document.querySelectorAll(".site-header [data-animate]").forEach(t=>{const e=parseInt(t.dataset.animateDelay)||0;setTimeout(()=>{t.classList.add("animated"),t.addEventListener("animationend",()=>{t.style.willChange="auto"},{once:!0})},e)})}initScrollAnimations(){if(!("IntersectionObserver"in window))return void document.querySelectorAll("[data-animate]").forEach(t=>{t.style.opacity="1"});const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(this.animateElement(e.target),this.config.once&&t.unobserve(e.target))})},this.config);document.querySelectorAll("[data-animate]").forEach(e=>{e.closest(".site-header")||t.observe(e)})}animateElement(t){const e=parseInt(t.dataset.animateDelay)||0;setTimeout(()=>{t.classList.add("animated"),t.addEventListener("animationend",()=>{t.style.willChange="auto"},{once:!0})},e)}initBackToTop(){const t=document.querySelector(".back-to-top");if(!t)return;let e=!1;const o=()=>{e||(window.requestAnimationFrame(()=>{window.pageYOffset>300?t.classList.add("visible"):t.classList.remove("visible"),e=!1}),e=!0)};window.addEventListener("scroll",o,{passive:!0}),o(),t.addEventListener("click",t=>{t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})}initCountdowns(){const t=document.querySelectorAll(".countdown-timer");t.length&&t.forEach(t=>{const e=t.dataset.endDate;e&&this.startCountdown(t,new Date(e).getTime())})}startCountdown(t,e){const o=()=>{const o=Date.now(),s=e-o;if(s<0)return void(t.innerHTML='<div class="countdown-expired">Offer expired</div>');const i=Math.floor(s/864e5),n=Math.floor(s%864e5/36e5),a=Math.floor(s%36e5/6e4),r=Math.floor(s%6e4/1e3),c=t.querySelector(".countdown-value.days"),l=t.querySelector(".countdown-value.hours"),d=t.querySelector(".countdown-value.minutes"),u=t.querySelector(".countdown-value.seconds");c&&(c.textContent=String(i).padStart(2,"0")),l&&(l.textContent=String(n).padStart(2,"0")),d&&(d.textContent=String(a).padStart(2,"0")),u&&(u.textContent=String(r).padStart(2,"0"))};o(),setInterval(o,1e3)}static showNotification(t,e="info",o=3e3){const s=document.createElement("div");s.className=`cart-message cart-message--${e}`,s.innerHTML=`\n            <div class="cart-message__content">\n                <span>${t}</span>\n                <button class="cart-message__close" aria-label="Close">&times;</button>\n            </div>\n        `,document.body.appendChild(s),s.offsetHeight,s.classList.add("visible");const i=()=>{s.classList.remove("visible"),setTimeout(()=>s.remove(),300)};s.querySelector(".cart-message__close").addEventListener("click",i),o>0&&setTimeout(i,o)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>new MRAnimations):new MRAnimations,window.MRAnimations=MRAnimations;class CartManager{constructor(){this.ajaxUrl=this.getAjaxUrl(),this.nonce=this.getNonce(),this.isEmptyCart=this.checkIfEmptyCart(),this.init()}getAjaxUrl(){return"undefined"!=typeof mr_ajax&&mr_ajax.url?mr_ajax.url:"undefined"!=typeof mr_ajax&&mr_ajax.ajax_url?mr_ajax.ajax_url:"undefined"!=typeof mrTheme&&mrTheme.ajaxUrl?mrTheme.ajaxUrl:"undefined"!=typeof wc_add_to_cart_params&&wc_add_to_cart_params.ajax_url?wc_add_to_cart_params.ajax_url:"/wp-admin/admin-ajax.php"}getNonce(){return"undefined"!=typeof mr_ajax&&mr_ajax.nonce?mr_ajax.nonce:"undefined"!=typeof mrTheme&&mrTheme.nonce?mrTheme.nonce:""}checkIfEmptyCart(){return!!this.isCartPage()&&(null!==document.querySelector(".cart-empty-wrapper")||null!==document.querySelector(".wc-empty-cart-message")||null!==document.querySelector(".cart-empty"))}init(){this.bindEvents(),this.bindWooCommerceEvents(),this.handleCouponErrors(),this.isEmptyCart&&this.isCartPage()&&this.preventFragmentUpdates()}handleCouponErrors(){"undefined"!=typeof jQuery&&(jQuery(document).on("click",'.coupon button[name="apply_coupon"]',t=>{if(!jQuery('input[name="coupon_code"]').val().trim())return t.preventDefault(),this.showMessage("Please enter a coupon code.","error"),!1}),jQuery(document.body).on("updated_wc_div",()=>{this.checkAndConvertCouponErrors()}),setTimeout(()=>{this.checkAndConvertCouponErrors()},100))}checkAndConvertCouponErrors(){document.querySelectorAll(".woocommerce-error, .woocommerce-message, .woocommerce-info").forEach(t=>{const e=t.textContent.trim();if(e.toLowerCase().includes("coupon")||e.toLowerCase().includes("code")||t.querySelector('a[href*="cart"]')){const o=e.replace(/×/g,"").trim();let s="info";t.classList.contains("woocommerce-error")?s="error":t.classList.contains("woocommerce-message")&&(s="success"),this.showMessage(o,s),t.style.display="none",t.remove()}})}preventFragmentUpdates(){if("undefined"!=typeof jQuery){const t=jQuery.fn.trigger;jQuery.fn.trigger=function(e){return"wc_fragment_refresh"!==e&&"wc_fragments_refreshed"!==e&&"wc_fragments_loaded"!==e||!document.body.classList.contains("cart-is-empty")?t.apply(this,arguments):this}}}bindEvents(){document.addEventListener("click",t=>{const e=t.target.closest(".add-to-cart-button, .product-card__add-to-cart");e&&!e.classList.contains("ajax_add_to_cart")&&(t.preventDefault(),this.addToCart(e))}),document.addEventListener("click",t=>{const e=t.target.closest("a.remove");e&&this.isCartPage()&&(t.preventDefault(),t.stopPropagation(),this.removeFromCartPage(e))},!0),document.addEventListener("click",t=>{const e=t.target.closest(".cart-item-remove");e&&(t.preventDefault(),t.stopPropagation(),this.removeFromCart(e))},!0),document.addEventListener("change",t=>{if(t.target.classList.contains("qty")){const e=this.getCartItemKeyFromInput(t.target);e&&this.updateQuantity(t.target,e)}})}getCartItemKeyFromInput(t){const e=t.getAttribute("name");if(!e)return null;const o=e.match(/cart\[([^\]]+)\]\[qty\]/);return o?o[1]:null}bindWooCommerceEvents(){"undefined"!=typeof jQuery?(jQuery(document.body).on("added_to_cart",(t,e,o,s)=>{if(this.isEmptyCart&&this.isCartPage())return t.stopImmediatePropagation(),setTimeout(()=>{window.location.reload()},5500),!1;this.updateFragments(e),this.showMessage("Product added to cart!","success")}),jQuery(document.body).on("removed_from_cart",(t,e,o)=>{e&&this.updateFragments(e)}),jQuery(document.body).on("wc_fragments_refreshed",()=>{this.isEmptyCart&&this.isCartPage()||this.updateCartCountVisibility()})):console.warn("jQuery not available for WooCommerce events")}isCartPage(){return document.body.classList.contains("woocommerce-cart")}async removeFromCartPage(t){const e=t.getAttribute("href");if(!e)return void console.error("No remove URL found");const o=t.closest("tr");o&&(o.style.opacity="0.5",o.style.pointerEvents="none");try{const t=await fetch(e,{method:"GET",credentials:"same-origin"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);if(document.querySelectorAll(".woocommerce-cart-form__cart-item").length<=1)return this.showMessage("Item removed from cart.","info"),void setTimeout(()=>{window.location.reload()},500);window.location.reload()}catch(t){console.error("Remove from cart error:",t),this.showMessage("Failed to remove item. Please try again.","error"),o&&(o.style.opacity="1",o.style.pointerEvents="")}}async addToCart(t){const e=t.dataset.product_id||t.dataset.productId||t.value,o=t.dataset.quantity||1;if(!e)return void console.error("No product ID found");t.classList.add("loading");const s=t.innerHTML;t.disabled=!0;try{if("undefined"==typeof wc_add_to_cart_params)throw new Error("WooCommerce not properly initialized");const s=new FormData;s.append("product_id",e),s.append("quantity",o);const i=await fetch(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),{method:"POST",body:s}),n=await i.json();if(n.error&&n.product_url)return void(window.location.href=n.product_url);if(n.fragments){if(this.showMessage("Product added to cart!","success"),this.isEmptyCart&&this.isCartPage())return void setTimeout(()=>{window.location.reload()},2500);this.updateFragments(n.fragments),"undefined"!=typeof jQuery&&jQuery(document.body).trigger("added_to_cart",[n.fragments,n.cart_hash,jQuery(t)])}}catch(t){console.error("Add to cart error:",t),this.showMessage("Failed to add product to cart. Please try again.","error")}finally{this.isEmptyCart&&this.isCartPage()||(t.classList.remove("loading"),t.disabled=!1,t.innerHTML=s)}}async removeFromCart(t){const e=t.dataset.cartItemKey;if(!e)return void console.error("No cart item key found");t.classList.add("loading");const o=t.closest(".cart-dropdown-item");o&&(o.style.opacity="0.5",o.style.pointerEvents="none");try{const t=new FormData;t.append("action","remove_cart_item"),t.append("cart_item_key",e),t.append("nonce",this.nonce);const s=await fetch(this.ajaxUrl,{method:"POST",body:t,credentials:"same-origin"});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const i=s.headers.get("content-type");if(!i||!i.includes("application/json"))throw new Error("Response is not JSON");const n=await s.json();if(!n.success)throw new Error(n.data?.message||"Failed to remove item");{n.data.fragments&&this.updateFragments(n.data.fragments),this.updateCartCount(n.data.cart_count),o&&(o.style.transition="all 0.3s ease",o.style.transform="translateX(5%)",o.style.opacity="0",setTimeout(()=>{if(o.remove(),0===n.data.cart_count){const t=document.querySelector(".cart-dropdown-items");t&&(t.innerHTML='<li class="cart-dropdown-empty"><p>Your cart is empty.</p></li>')}},300));const t=document.querySelector(".cart-subtotal-amount");t&&n.data.cart_subtotal&&(t.innerHTML=n.data.cart_subtotal);const e=document.querySelector(".cart-item-count");if(e){const t=n.data.cart_count;e.textContent=`${t} ${1===t?"item":"items"}`}this.showMessage("Item removed from cart.","info"),"undefined"!=typeof jQuery&&jQuery(document.body).trigger("removed_from_cart",[n.data.fragments||null,null])}}catch(t){console.error("Remove from cart error:",t),this.showMessage("Failed to remove item. Please try again.","error"),o&&(o.style.opacity="1",o.style.pointerEvents="")}finally{t.classList.remove("loading")}}async updateQuantity(t,e){const o=t.value;if(!e||o<0)return;const s=t.closest("tr");s&&(s.style.opacity="0.6",s.style.pointerEvents="none");try{const t=new FormData;t.append("action","update_cart_quantity"),t.append("cart_item_key",e),t.append("quantity",o),t.append("nonce",this.nonce);const i=await fetch(this.ajaxUrl,{method:"POST",body:t,credentials:"same-origin"});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const n=await i.json();if(!n.success)throw new Error(n.data?.message||"Failed to update cart");{if(n.data.line_subtotal&&s){const t=s.querySelector(".product-subtotal");t&&(t.innerHTML=n.data.line_subtotal)}if(n.data.cart_totals_html){const t=document.querySelector(".cart_totals");t&&(t.outerHTML=n.data.cart_totals_html)}n.data.fragments&&this.updateFragments(n.data.fragments),this.updateCartCount(n.data.cart_count);const t=document.querySelector(".cart-subtotal-amount");t&&n.data.cart_subtotal&&(t.innerHTML=n.data.cart_subtotal),"undefined"!=typeof jQuery&&jQuery(document.body).trigger("updated_cart_totals"),this.showMessage("Cart updated successfully!","success")}}catch(t){console.error("Update cart error:",t),this.showMessage("Failed to update cart. Please try again.","error")}finally{s&&(s.style.opacity="1",s.style.pointerEvents="")}}updateFragments(t){t&&(this.isEmptyCart&&this.isCartPage()||(Object.keys(t).forEach(e=>{document.querySelectorAll(e).forEach(o=>{const s=t[e];if(".cart-dropdown-items"===e){const t=document.createElement("ul");t.className="cart-dropdown-items",t.innerHTML=s,o.parentNode.replaceChild(t,o)}else o.innerHTML=s})}),this.updateCartCountVisibility()))}updateCartCount(t){document.querySelectorAll(".cart-count").forEach(e=>{e.textContent=t,e.style.display=t>0?"":"none"})}updateCartCountVisibility(){document.querySelectorAll(".cart-count").forEach(t=>{const e=parseInt(t.textContent)||0;t.style.display=e>0?"":"none"})}showMessage(t,e="info"){const o=document.querySelector(".cart-message");o&&o.remove();const s=document.createElement("div");s.className=`cart-message cart-message--${e}`,s.innerHTML=`\n            <div class="cart-message__content">\n                <span class="cart-message__icon">\n                    ${"success"===e?"✓":"error"===e?"✕":"ℹ"}\n                </span>\n                <span class="cart-message__text">${t}</span>\n                <button class="cart-message__close" aria-label="Close message">\n                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">\n                        <path fill-rule="evenodd" d="M13.854 2.146a.5.5 0 010 .708l-11 11a.5.5 0 01-.708-.708l11-11a.5.5 0 01.708 0z" clip-rule="evenodd"/>\n                        <path fill-rule="evenodd" d="M2.146 2.146a.5.5 0 000 .708l11 11a.5.5 0 00.708-.708l-11-11a.5.5 0 00-.708 0z" clip-rule="evenodd"/>\n                    </svg>\n                </button>\n            </div>\n        `,document.body.appendChild(s),requestAnimationFrame(()=>{s.classList.add("cart-message--visible")});const i=setTimeout(()=>{this.removeMessage(s)},4e3);s.querySelector(".cart-message__close").addEventListener("click",()=>{clearTimeout(i),this.removeMessage(s)})}removeMessage(t){t.classList.remove("cart-message--visible"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)}}document.addEventListener("DOMContentLoaded",()=>{window.cartManager=new CartManager}),"loading"!==document.readyState&&(window.cartManager=new CartManager),function(){"use strict";function t(){const t=document.querySelector(".category-filter-buttons");if(!t)return;let o,s,i=!1,n=!1,a=0;!function(t){const e=t.parentElement;if(e.querySelector(".category-filter-overlay"))return;const o=document.createElement("div");o.className="category-filter-overlay category-filter-overlay--left",o.setAttribute("aria-hidden","true");const s=document.createElement("div");s.className="category-filter-overlay category-filter-overlay--right",s.setAttribute("aria-hidden","true"),e.appendChild(o),e.appendChild(s)}(t),e(t);t.querySelectorAll("a").forEach(function(t){t.addEventListener("dragstart",function(t){return t.preventDefault(),!1})}),t.addEventListener("mousedown",function(e){i=!0,n=!1,a=0,o=e.pageX-t.offsetLeft,s=t.scrollLeft,t.style.cursor="grabbing",e.preventDefault()}),t.addEventListener("mouseleave",function(){i=!1,n=!1,a=0,t.classList.remove("is-dragging"),t.style.cursor="grab"}),t.addEventListener("mouseup",function(){i=!1,t.classList.remove("is-dragging"),t.style.cursor="grab",setTimeout(function(){n=!1,a=0},10)}),t.addEventListener("mousemove",function(r){if(!i)return;r.preventDefault();const c=r.pageX-t.offsetLeft,l=1.5*(c-o);a=Math.abs(c-o),a>5&&(n||(n=!0,t.classList.add("is-dragging")),t.scrollLeft=s-l,e(t))}),t.addEventListener("scroll",function(){e(t)}),t.addEventListener("click",function(t){if(n&&a>5)return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1},!0);let r=0,c=0,l=0,d=!1,u=0;t.addEventListener("touchstart",function(e){r=e.touches[0].pageX,c=e.touches[0].pageY,l=t.scrollLeft,d=!1,u=0},{passive:!0}),t.addEventListener("touchmove",function(o){const s=o.touches[0].pageX,i=o.touches[0].pageY,n=r-s,a=Math.abs(c-i);u=Math.abs(n),u>a&&u>5&&(d=!0,t.scrollLeft=l+n,e(t))},{passive:!0}),t.addEventListener("touchend",function(){setTimeout(function(){d=!1,u=0},10)},{passive:!0}),t.addEventListener("click",function(t){if(d&&u>5)return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1},!0),window.addEventListener("resize",function(){e(t)})}function e(t){const e=t.parentElement,o=e.querySelector(".category-filter-overlay--left"),s=e.querySelector(".category-filter-overlay--right");if(!o||!s)return;const i=t.scrollLeft,n=t.scrollWidth,a=t.clientWidth,r=n-a;if(!(n>a))return o.classList.remove("visible"),o.classList.add("hidden"),s.classList.remove("visible"),void s.classList.add("hidden");i>1?(o.classList.add("visible"),o.classList.remove("hidden")):(o.classList.remove("visible"),o.classList.add("hidden")),i<r-1?(s.classList.add("visible"),s.classList.remove("hidden")):(s.classList.remove("visible"),s.classList.add("hidden"))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}(),function(){"use strict";class t{constructor(t){this.wrapper=t,this.deals=this.wrapper.querySelectorAll(".special-deal-card"),this.dots=this.wrapper.querySelectorAll(".deals-dot"),this.totalDeals=parseInt(this.wrapper.dataset.totalDeals,10)||0,this.currentIndex=0,this.rotationTimer=null,this.isPaused=!1,this.countdownTimers=[],this.totalDeals>0&&this.init()}init(){this.initCountdowns(),this.totalDeals>1&&(this.setupNavigation(),this.startRotation(),this.setupHoverPause())}initCountdowns(){this.deals.forEach((t,e)=>{const o=t.querySelector(".countdown-timer");if(o){const t=o.dataset.endDate;t&&this.startCountdown(o,t,e)}})}startCountdown(t,e,o){const s=()=>{const s=(new Date).getTime(),i=new Date(e).getTime()-s;if(i<0)return clearInterval(this.countdownTimers[o]),void(t.innerHTML='<p style="color: #fff; text-align: center;">Sale Ended</p>');const n=Math.floor(i/864e5),a=Math.floor(i%864e5/36e5),r=Math.floor(i%36e5/6e4),c=Math.floor(i%6e4/1e3),l=t.querySelector(".days"),d=t.querySelector(".hours"),u=t.querySelector(".minutes"),m=t.querySelector(".seconds");l&&(l.textContent=String(n).padStart(2,"0")),d&&(d.textContent=String(a).padStart(2,"0")),u&&(u.textContent=String(r).padStart(2,"0")),m&&(m.textContent=String(c).padStart(2,"0"))};s(),this.countdownTimers[o]=setInterval(s,1e3)}setupNavigation(){this.dots.forEach((t,e)=>{t.addEventListener("click",()=>{this.goToSlide(e),this.resetRotation()})});const t=this.wrapper.querySelector(".deals-arrow-prev"),e=this.wrapper.querySelector(".deals-arrow-next");t&&t.addEventListener("click",()=>{this.previousSlide(),this.resetRotation()}),e&&e.addEventListener("click",()=>{this.nextSlide(),this.resetRotation()})}setupHoverPause(){this.wrapper.addEventListener("mouseenter",()=>{this.isPaused=!0}),this.wrapper.addEventListener("mouseleave",()=>{this.isPaused=!1})}startRotation(){this.rotationTimer=setInterval(()=>{this.isPaused||this.nextSlide()},8e3)}resetRotation(){clearInterval(this.rotationTimer),this.startRotation()}nextSlide(){const t=(this.currentIndex+1)%this.totalDeals;this.goToSlide(t)}previousSlide(){const t=(this.currentIndex-1+this.totalDeals)%this.totalDeals;this.goToSlide(t)}goToSlide(t){t!==this.currentIndex&&(this.deals[this.currentIndex].classList.remove("active"),this.dots[this.currentIndex]&&this.dots[this.currentIndex].classList.remove("active"),this.currentIndex=t,this.deals[this.currentIndex].classList.add("active"),this.dots[this.currentIndex]&&this.dots[this.currentIndex].classList.add("active"))}destroy(){this.rotationTimer&&clearInterval(this.rotationTimer),this.countdownTimers.forEach(t=>{t&&clearInterval(t)})}}function e(){const e=document.querySelector(".deals-slider-wrapper");e&&new t(e)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}(),function(){"use strict";class t{constructor(){this.button=document.querySelector(".back-to-top"),this.button&&(this.scrollThreshold=300,this.isVisible=!1,this.init())}init(){let t;this.toggleVisibility(),window.addEventListener("scroll",()=>{t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame(()=>{this.toggleVisibility()})},{passive:!0}),this.button.addEventListener("click",t=>{t.preventDefault(),this.scrollToTop()}),this.button.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.scrollToTop())})}toggleVisibility(){const t=window.pageYOffset||document.documentElement.scrollTop;t>this.scrollThreshold&&!this.isVisible?this.show():t<=this.scrollThreshold&&this.isVisible&&this.hide()}show(){this.button.classList.add("visible"),this.button.setAttribute("aria-hidden","false"),this.isVisible=!0}hide(){this.button.classList.remove("visible"),this.button.setAttribute("aria-hidden","true"),this.isVisible=!1}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{const t=document.querySelector(".skip-link"),e=document.querySelector("main, #main, .site-main");t?t.focus():e&&(e.setAttribute("tabindex","-1"),e.focus())},500)}}class e{constructor(){this.links=document.querySelectorAll(".footer-menu a, .footer-nav a"),0!==this.links.length&&this.init()}init(){this.links.forEach(t=>{t.addEventListener("mouseenter",function(){this.classList.add("is-hovered")}),t.addEventListener("mouseleave",function(){this.classList.remove("is-hovered")})})}}class o{constructor(){this.socialLinks=document.querySelectorAll(".social-link"),0!==this.socialLinks.length&&this.init()}init(){this.socialLinks.forEach(t=>{t.addEventListener("click",e=>{const o=this.getPlatform(t);this.trackClick(o,t.href)})})}getPlatform(t){const e=t.className.split(" ");for(let t of e)if(t.startsWith("social-"))return t.replace("social-","");return"unknown"}trackClick(t,e){"undefined"!=typeof gtag&&gtag("event","social_click",{platform:t,url:e,location:"footer"}),"undefined"!=typeof fbq&&fbq("trackCustom","SocialClick",{platform:t,location:"footer"}),document.dispatchEvent(new CustomEvent("socialClick",{detail:{platform:t,url:e,location:"footer"}}))}}class s{constructor(){this.footer=document.querySelector(".site-footer"),this.widgets=document.querySelectorAll(".footer-widget"),this.footer&&0!==this.widgets.length&&this.init()}init(){if(!("IntersectionObserver"in window))return void this.widgets.forEach(t=>{t.classList.add("is-visible")});const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-visible"),t.unobserve(e.target))})},{root:null,rootMargin:"0px",threshold:.1});this.widgets.forEach((e,o)=>{e.style.transitionDelay=.1*o+"s",t.observe(e)})}}class i{constructor(){this.form=document.querySelector(".footer-newsletter-form, .newsletter-form"),this.form&&this.init()}init(){this.form.addEventListener("submit",t=>{this.handleSubmit(t)})}handleSubmit(t){t.preventDefault();const e=this.form.querySelector('input[type="email"]'),o=this.form.querySelector('button[type="submit"]');e&&e.value&&(o.disabled=!0,o.textContent=o.getAttribute("data-loading-text")||"Subscribing...",setTimeout(()=>{this.showMessage("success","Thank you for subscribing!"),e.value="",o.disabled=!1,o.textContent=o.getAttribute("data-original-text")||"Subscribe"},1e3))}showMessage(t,e){const o=this.form.querySelector(".form-message");o&&o.remove();const s=document.createElement("div");s.className=`form-message form-message-${t}`,s.textContent=e,s.setAttribute("role","success"===t?"status":"alert"),this.form.appendChild(s),setTimeout(()=>{s.remove()},5e3)}}function n(){new t,new e,new o,new s,new i,document.querySelectorAll('.footer-menu a[href^="#"], .footer-nav a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){const e=this.getAttribute("href");if(e&&e.startsWith("#")&&"#"!==e){const o=document.querySelector(e);o&&(t.preventDefault(),o.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,null,e),o.setAttribute("tabindex","-1"),o.focus())}})}),document.dispatchEvent(new CustomEvent("footerInitialized"))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}(),function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const t=document.body,e=document.querySelector(".site-header"),o=document.querySelector(".top-bar"),s=t.classList.contains("admin-bar"),i=null!==o;if(!e)return;let n=0,a=!1;function r(a){const r=window.innerWidth<768;window.innerWidth;a>50?(t.classList.add("scrolled"),e&&e.classList.add("is-sticky"),i&&o&&!r&&(o.style.transform="translateY(-100%)"),e.style.top=r?s?"46px":"0":s?"32px":"0"):(t.classList.remove("scrolled"),e&&e.classList.remove("is-sticky"),i&&o&&!r&&(o.style.transform="translateY(0)"),e.style.top=r?s?"46px":"0":s&&i?"77px":s&&!i?"32px":!s&&i?"45px":"0"),n=a}window.addEventListener("scroll",function(){n=window.pageYOffset||document.documentElement.scrollTop,a||(window.requestAnimationFrame(function(){r(n),a=!1}),a=!0)},{passive:!0}),window.addEventListener("resize",function(){a||(window.requestAnimationFrame(function(){r(n),a=!1}),a=!0)},{passive:!0}),r(window.pageYOffset||document.documentElement.scrollTop)})}(),function(){"use strict";class t{constructor(){this.video=null,this.isMobile=window.innerWidth<=768,this.heroSection=document.querySelector(".hero-section"),this.heroSection&&(this.useMobileFallback="true"===this.heroSection.dataset.mobileFallback,this.videoLoop="true"===this.heroSection.dataset.videoLoop,this.videoMute="true"===this.heroSection.dataset.videoMute,this.videoUrl=this.heroSection.dataset.videoUrl,this.fallbackImage=this.heroSection.dataset.fallbackImage,this.init())}init(){this.cacheElements(),!this.isVideoMode()||this.isMobile&&this.useMobileFallback||(this.createVideoElement(),this.bindEvents())}isVideoMode(){return this.heroSection&&this.heroSection.classList.contains("hero-video-mode")}cacheElements(){this.videoContainer=this.heroSection.querySelector(".hero-video-container")}bindEvents(){window.addEventListener("resize",this.handleResize.bind(this))}handleResize(){const t=this.isMobile;this.isMobile=window.innerWidth<=768,t!==this.isMobile&&this.useMobileFallback&&this.isVideoMode()&&(this.isMobile?(this.pauseVideo(),this.hideVideo()):(this.showVideo(),this.playVideo()))}createVideoElement(){if(!this.videoContainer||!this.videoUrl)return void console.warn("Missing video container or URL");this.video=document.createElement("video"),this.video.className="hero-background-video",this.video.playsInline=!0,this.video.preload="metadata",this.video.muted=this.videoMute,this.video.loop=this.videoLoop,this.fallbackImage&&(this.video.poster=this.fallbackImage);const t=document.createElement("source");t.src=this.videoUrl,t.type="video/webm",this.video.appendChild(t),this.video.addEventListener("error",this.handleVideoError.bind(this)),this.video.addEventListener("canplay",this.handleVideoCanPlay.bind(this));const e=this.videoContainer.querySelector(".video-fallback-image");e&&(e.style.display="none"),this.videoContainer.appendChild(this.video),this.setupVideoControls()}setupVideoControls(){const t=this.videoContainer?.querySelector(".video-play-btn"),e=this.videoContainer?.querySelector(".video-pause-btn"),o=this.videoContainer?.querySelector(".video-mute-btn");t&&this.video&&t.addEventListener("click",()=>{this.playVideo(),t.style.display="none",e&&(e.style.display="flex")}),e&&this.video&&e.addEventListener("click",()=>{this.pauseVideo(),e.style.display="none",t&&(t.style.display="flex")}),o&&this.video&&o.addEventListener("click",()=>this.toggleMute(o)),this.video&&(this.video.addEventListener("play",()=>{t?.style.setProperty("display","none","important"),e?.style.setProperty("display","flex","important")}),this.video.addEventListener("pause",()=>{e?.style.setProperty("display","none","important"),t?.style.setProperty("display","flex","important")}))}playVideo(){if(!this.video)return;const t=this.video.play();void 0!==t&&t.then(()=>{const t=this.videoContainer?.querySelector(".video-fallback-image");t&&(t.style.display="none")}).catch(t=>{console.warn("Video autoplay failed:",t);const e=this.videoContainer?.querySelector(".video-play-btn");e&&(e.style.display="flex")})}pauseVideo(){this.video&&this.video.pause()}toggleMute(t){if(!this.video||!t)return;this.video.muted=!this.video.muted;const e=this.video.muted;t.innerHTML=e?'<svg class="mute-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>':'<svg class="unmute-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>',t.setAttribute("aria-label",e?"Unmute video":"Mute video")}handleVideoCanPlay(){setTimeout(()=>{this.playVideo()},500)}handleVideoError(){console.error("Failed to load video");const t=this.videoContainer?.querySelector(".video-fallback-image");t&&(t.style.display="block",this.video&&(this.video.style.display="none"));const e=this.videoContainer?.querySelector(".video-controls");e&&(e.style.display="none")}hideVideo(){this.video&&(this.video.style.display="none");const t=this.videoContainer?.querySelector(".video-fallback-image");t&&(t.style.display="block");const e=this.videoContainer?.querySelector(".video-controls");e&&(e.style.display="none")}showVideo(){this.video&&(this.video.style.display="block");const t=this.videoContainer?.querySelector(".video-fallback-image");t&&(t.style.display="none");const e=this.videoContainer?.querySelector(".video-controls");e&&(e.style.display="flex")}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new t}):new t}();class Modal{constructor(){this.modals=new Map,this.init()}init(){this.initSearchModal(),this.initQuickViewModal(),this.bindGlobalEvents()}initSearchModal(){const t=document.querySelector(".search-toggle"),e=document.querySelector(".search-modal");if(!t||!e)return;this.modals.set("search",{element:e,openers:[t]});const o=e.querySelector('input[type="search"]'),s=e.querySelector(".search-results-container");o&&s&&this.initSearch(o,s)}initSearch(t,e){let o;t.addEventListener("input",t=>{clearTimeout(o);const s=t.target.value.trim();s.length<2?e.innerHTML="":o=setTimeout(()=>{this.performSearch(s,e)},300)}),t.closest("form").addEventListener("submit",e=>{t.value.trim().length<2&&e.preventDefault()})}async performSearch(t,e){try{const o=await fetch(`${mr_ajax.url}?action=mr_product_search&s=${encodeURIComponent(t)}&nonce=${mr_ajax.nonce}`),s=await o.json();s.success&&(e.innerHTML=s.data)}catch(t){console.error("Search error:",t),e.innerHTML='<p class="search-error">Search failed. Please try again.</p>'}}initQuickViewModal(){const t=document.querySelector(".quick-view-modal");t&&this.modals.set("quick-view",{element:t,openers:[]})}bindGlobalEvents(){document.addEventListener("keydown",t=>{"Escape"===t.key&&this.closeAllModals()}),document.addEventListener("click",t=>{(t.target.classList.contains("modal-backdrop")||t.target.closest(".modal-close"))&&this.closeAllModals()})}openModal(t){const e=this.modals.get(t);e&&(e.element.classList.add("active"),document.body.classList.add("modal-open"),this.trapFocus(e.element),document.dispatchEvent(new CustomEvent("modalOpened",{detail:{name:t}})))}closeModal(t){const e=this.modals.get(t);e&&(e.element.classList.remove("active"),document.body.classList.remove("modal-open"),document.dispatchEvent(new CustomEvent("modalClosed",{detail:{name:t}})))}closeAllModals(){this.modals.forEach((t,e)=>{this.closeModal(e)})}trapFocus(t){const e=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),o=e[0],s=e[e.length-1];t.addEventListener("keydown",function(t){"Tab"===t.key&&(t.shiftKey?document.activeElement===o&&(t.preventDefault(),s.focus()):document.activeElement===s&&(t.preventDefault(),o.focus()))}),o.focus()}}document.addEventListener("DOMContentLoaded",()=>{window.modal=new Modal}),function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".mobile-menu-toggle"),e=document.querySelector(".main-navigation"),o=document.querySelector(".mobile-menu-overlay"),s=document.body;t&&e&&t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();const i="true"===this.getAttribute("aria-expanded");this.setAttribute("aria-expanded",!i),e.classList.toggle("active"),o&&o.classList.toggle("active"),s.classList.toggle("mobile-menu-open")}),o&&t&&e&&o.addEventListener("click",function(){t.setAttribute("aria-expanded","false"),e.classList.remove("active"),o.classList.remove("active"),s.classList.remove("mobile-menu-open")}),document.addEventListener("keydown",function(i){"Escape"===i.key&&t&&"true"===t.getAttribute("aria-expanded")&&(t.setAttribute("aria-expanded","false"),e.classList.remove("active"),o&&o.classList.remove("active"),s.classList.remove("mobile-menu-open"),t.focus())});document.querySelectorAll(".main-navigation .submenu-toggle").forEach(function(t){t.remove()});const i=document.querySelectorAll(".main-navigation .menu-item-has-children");let n;i.forEach(function(t){const e=t.querySelector("a");e&&e.addEventListener("click",function(e){if(window.innerWidth<=1023){if(e.offsetX>this.offsetWidth-40||t.classList.contains("active")){e.preventDefault(),t.classList.toggle("active");t.parentElement.querySelectorAll(":scope > .menu-item-has-children").forEach(function(e){e!==t&&e.classList.remove("active")})}}})}),window.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(function(){window.innerWidth>1023&&(t&&t.setAttribute("aria-expanded","false"),e&&e.classList.remove("active"),o&&o.classList.remove("active"),s.classList.remove("mobile-menu-open"),i.forEach(function(t){t.classList.remove("active")}))},250)});document.querySelectorAll(".cart-item-remove").forEach(function(t){t.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),"undefined"==typeof mr_ajax)return console.error("AJAX variables not loaded. Make sure inc/ajax.php is properly included."),void alert("Error: Unable to remove item. Please refresh the page and try again.");const o=this.getAttribute("data-cart-item-key"),s=this.closest(".cart-dropdown-item");o&&(t.disabled=!0,t.style.opacity="0.5",fetch(mr_ajax.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"remove_cart_item",cart_item_key:o,nonce:mr_ajax.nonce})}).then(t=>t.json()).then(e=>{e.success?(s.style.transition="opacity 0.3s ease, transform 0.3s ease",s.style.opacity="0",s.style.transform="translateX(20px)",setTimeout(function(){if(s.remove(),function(t){const e=document.querySelectorAll(".cart-count"),o=document.querySelector(".cart-item-count");if(e.forEach(function(e){t>0?(e.textContent=t,e.style.display="flex"):e.style.display="none"}),o){const e=1===t?"item":"items";o.textContent=t+" "+e}}(e.data.cart_count),function(t){const e=document.querySelector(".cart-subtotal strong");e&&t&&(e.innerHTML=t)}(e.data.cart_subtotal),0===e.data.cart_count){const t=document.querySelector(".cart-dropdown");t&&(t.style.display="none"),setTimeout(function(){window.location.reload()},500)}},300)):(t.disabled=!1,t.style.opacity="1",alert(e.data.message||"Failed to remove item"))}).catch(e=>{console.error("Error:",e),t.disabled=!1,t.style.opacity="1",alert("An error occurred. Please try again.")}))})});document.querySelectorAll(".main-navigation .nav-menu a").forEach(function(t){t.addEventListener("keydown",function(t){const e=this.closest("li"),o=e.querySelector(".sub-menu");if("ArrowDown"===t.key)if(t.preventDefault(),o){const t=o.querySelector("a");t&&t.focus()}else{const t=e.nextElementSibling;if(t){const e=t.querySelector("a");e&&e.focus()}}if("ArrowUp"===t.key){t.preventDefault();const o=e.previousElementSibling;if(o){const t=o.querySelector("a");t&&t.focus()}}if("ArrowRight"===t.key)if(t.preventDefault(),o){const t=o.querySelector("a");t&&t.focus()}else{const t=e.nextElementSibling;if(t){const e=t.querySelector("a");e&&e.focus()}}if("ArrowLeft"===t.key){t.preventDefault();const o=e.closest(".sub-menu");if(o){const t=o.previousElementSibling;t&&t.focus()}else{const t=e.previousElementSibling;if(t){const e=t.querySelector("a");e&&e.focus()}}}})});const a=document.querySelector(".cart-dropdown"),r=document.querySelector(".account-dropdown");a&&a.addEventListener("click",function(t){t.stopPropagation()}),r&&r.addEventListener("click",function(t){t.stopPropagation()});const c=document.querySelectorAll(".has-mega-menu");c.forEach(function(t){const e=t.querySelector(".mega-menu-dropdown");if(e){const o=document.body.getAttribute("data-menu-hover-effect")||"fade-slide";e.parentElement.classList.add("menu-hover-"+o),"ontouchstart"in window&&t.addEventListener("touchstart",function(e){t.classList.contains("mega-menu-active")||(e.preventDefault(),c.forEach(function(e){e!==t&&e.classList.remove("mega-menu-active")}),t.classList.add("mega-menu-active"))})}}),document.addEventListener("click",function(t){t.target.closest(".has-mega-menu")||c.forEach(function(t){t.classList.remove("mega-menu-active")})})})}(),function(t){"use strict";function e(){t("body").hasClass("woocommerce-cart")||t(".quantity:not(.buttons-added)").each(function(){const e=t(this),o=e.find('input.qty, input[type="number"]');if(0===o.length||e.hasClass("buttons-added"))return;const s=parseFloat(o.attr("min"))||1,i=parseFloat(o.attr("max"))||999,n=parseFloat(o.attr("step"))||1;o.parent().hasClass("quantity-wrapper")||o.wrap('<div class="quantity-wrapper"></div>');const a=o.parent(".quantity-wrapper");0===a.find(".minus").length&&a.prepend('<button type="button" class="minus qty-btn" aria-label="Decrease quantity">−</button>'),0===a.find(".plus").length&&a.append('<button type="button" class="plus qty-btn" aria-label="Increase quantity">+</button>'),e.addClass("buttons-added"),e.data("min",s),e.data("max",i),e.data("step",n)})}function o(e){e.preventDefault(),e.stopPropagation();const o=t(this).closest(".quantity"),s=o.find('input.qty, input[type="number"]'),i=parseFloat(s.val())||0,n=parseFloat(o.data("max"))||999,a=i+(parseFloat(o.data("step"))||1);a<=n&&s.val(a).trigger("change")}function s(e){e.preventDefault(),e.stopPropagation();const o=t(this).closest(".quantity"),s=o.find('input.qty, input[type="number"]'),i=parseFloat(s.val())||0,n=parseFloat(o.data("min"))||1,a=i-(parseFloat(o.data("step"))||1);a>=n&&s.val(a).trigger("change")}function i(){const e=t(this),o=e.closest(".quantity");let s=parseFloat(e.val());const i=parseFloat(o.data("min"))||1,n=parseFloat(o.data("max"))||999;(isNaN(s)||""===s)&&(s=i),s<i&&(s=i),s>n&&(s=n),e.val(s)}t(document).ready(function(){if(!t("body").hasClass("woocommerce-cart")){e(),t(document).on("click",".qty-btn.plus",o),t(document).on("click",".qty-btn.minus",s),t(document).on("change",'.quantity input.qty, .quantity input[type="number"]',i),t(document.body).on("found_variation",function(){setTimeout(e,100)}),t(document.body).on("reset_data",function(){setTimeout(e,100)});const n=new MutationObserver(function(o){o.forEach(function(o){o.addedNodes.length&&t(o.addedNodes).find(".quantity").each(function(){t(this).hasClass("buttons-added")||e()})})}),a=t("form.cart");a.length&&n.observe(a[0],{childList:!0,subtree:!0})}})}(jQuery),function(t){"use strict";function e(e){const o=t("#quick-view-modal"),s=o.find(".quick-view-content");o.fadeIn(300),t("body").addClass("quick-view-open"),s.html('\n            <div class="quick-view-loading">\n                <div class="spinner"></div>\n                <p>Loading product...</p>\n            </div>\n        '),t.ajax({url:aaaposQuickView.ajax_url,type:"POST",data:{action:"get_quick_view_product",product_id:e,security:aaaposQuickView.nonce},success:function(e){var o;e.success&&e.data.html?(s.html(e.data.html),function(e){const o=e.find(".variations_form");o.length&&void 0!==t.fn.wc_variation_form&&(o.wc_variation_form(),o.trigger("check_variations"),o.trigger("wc_variation_form"),console.log("Variation form initialized"))}(s),o=s,setTimeout(function(){!function(e){e.find(".variations select").each(function(){const e=t(this),o=e.attr("name");if(!o||!o.toLowerCase().includes("color"))return;if(e.next(".color-swatches").length)return;const s=t('<div class="color-swatches"></div>');e.find("option").each(function(){const o=t(this),i=o.val(),n=o.text();if(!i)return;const a=function(t){const e={black:"#000000",white:"#ffffff",red:"#ef4444",blue:"#3b82f6",green:"#10b981",yellow:"#fbbf24",purple:"#7c3aed",pink:"#ec4899",orange:"#f97316",gray:"#6b7280",grey:"#6b7280",brown:"#92400e",navy:"#1e3a8a",teal:"#14b8a6",cyan:"#06b6d4",lime:"#84cc16",indigo:"#6366f1",violet:"#8b5cf6",fuchsia:"#d946ef",rose:"#f43f5e",amber:"#f59e0b",emerald:"#059669",sky:"#0ea5e9",slate:"#64748b"},o=t.toLowerCase().trim();return o.startsWith("#")?o:e[o]||"#7c3aed"}(i),r=t('<div class="color-swatch"></div>');r.attr("data-value",i),r.attr("title",n),r.css("background-color",a),function(t){const e=t.replace("#",""),o=parseInt(e.substr(0,2),16),s=parseInt(e.substr(2,2),16),i=parseInt(e.substr(4,2),16);return(299*o+587*s+114*i)/1e3>200}(a)&&r.css("border","2px solid #e5e7eb"),r.on("click",function(){s.find(".color-swatch").removeClass("selected"),t(this).addClass("selected"),e.val(i).trigger("change")}),s.append(r)}),e.hide().after(s);const i=e.val();i&&""!==i&&s.find(`[data-value="${i}"]`).addClass("selected")})}(o),function(e){e.find(".variations select").each(function(){const e=t(this),o=e.attr("name");if(!o||!o.toLowerCase().includes("size"))return;if(e.next(".size-buttons").length)return;const s=t('<div class="size-buttons"></div>');e.find("option").each(function(){const o=t(this),i=o.val(),n=o.text();if(!i)return;const a=t('<button type="button" class="size-button"></button>');a.attr("data-value",i),a.text(n),o.is(":disabled")&&a.prop("disabled",!0),a.on("click",function(o){o.preventDefault(),t(this).prop("disabled")||(s.find(".size-button").removeClass("selected"),t(this).addClass("selected"),e.val(i).trigger("change"))}),s.append(a)}),e.hide().after(s);const i=e.val();i&&""!==i&&s.find(`[data-value="${i}"]`).addClass("selected")})}(o),console.log("Custom swatches initialized")},100),t(document.body).trigger("quick_view_loaded"),console.log("Quick view loaded successfully")):s.html('<div class="quick-view-error"><p>Error loading product. Please try again.</p></div>')},error:function(t,e,o){console.error("Quick View Error:",o),s.html('<div class="quick-view-error"><p>Error loading product. Please try again.</p></div>')}})}function o(){const e=t("#quick-view-modal");e.fadeOut(300),t("body").removeClass("quick-view-open"),setTimeout(function(){e.find(".quick-view-content").html("")},300)}t(document).ready(function(){!function(){if(t("#quick-view-modal").length)return;t("body").append('\n            <div id="quick-view-modal" class="quick-view-modal" style="display: none;">\n                <div class="quick-view-overlay"></div>\n                <div class="quick-view-container">\n                    <button class="quick-view-close" aria-label="Close">\n                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                            <line x1="18" y1="6" x2="6" y2="18"></line>\n                            <line x1="6" y1="6" x2="18" y2="18"></line>\n                        </svg>\n                    </button>\n                    <div class="quick-view-content">\n                        <div class="quick-view-loading">\n                            <div class="spinner"></div>\n                            <p>Loading product...</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ')}(),t(document).on("click",".quick-view-button",function(o){o.preventDefault();const s=t(this).data("product-id");console.log("Quick View clicked for product:",s),e(s)}),t(document).on("click",".quick-view-close, .quick-view-overlay",function(t){t.preventDefault(),o()}),t(document).on("keyup",function(e){"Escape"===e.key&&t("#quick-view-modal").is(":visible")&&o()}),t(document).on("click",".quick-view-container",function(t){t.stopPropagation()})})}(jQuery),function(t){"use strict";class e{constructor(){this.isLoading=!1,this.mobileBreakpoint=767,this.init()}init(){this.initSorting(),this.initColumnToggle(),this.initResponsiveHandler()}initSorting(){const e=t(".woocommerce-ordering select.orderby");if(!e.length)return;const o=this;e.closest("form").on("submit",function(t){return t.preventDefault(),!1}),e.on("change",function(){const e=t(this).val();o.updateResults(e)})}updateResults(e){if(this.isLoading)return;const o=t(".products.search-results-grid"),s=t(".search-toolbar"),i=t('input[name="s"]').val();if(!o.length)return;this.isLoading=!0,o.addClass("loading").css("opacity","0.5"),s.css("pointer-events","none");const n=new URL(window.location.href);n.searchParams.set("orderby",e),n.searchParams.set("s",i),n.searchParams.set("post_type","product"),t.ajax({url:n.toString(),type:"GET",dataType:"html",success:e=>{const s=t(e).find(".products.search-results-grid").html();if(s){const t=o.attr("data-columns");o.html(s),o.attr("data-columns",t),window.history.pushState({},"",n.toString())}},error:(t,e,o)=>{console.error("Search sorting error:",o)},complete:()=>{this.isLoading=!1,o.removeClass("loading").css("opacity","1"),s.css("pointer-events","")}})}initColumnToggle(){const e=t(".column-toggle"),o=t(".products.search-results-grid");if(!e.length||!o.length)return;const s=localStorage.getItem("searchResultsColumns")||"4";this.applyResponsiveColumns(s,o,e);const i=this;e.on("click",function(s){s.preventDefault();const n=t(this),a=n.attr("data-columns");a&&(e.removeClass("active"),n.addClass("active"),i.setColumns(a,o,e),localStorage.setItem("searchResultsColumns",a))})}initResponsiveHandler(){const e=t(".products.search-results-grid"),o=t(".column-toggle");if(!e.length)return;const s=this;let i;t(window).on("resize",function(){clearTimeout(i),i=setTimeout(function(){const t=localStorage.getItem("searchResultsColumns")||"4";s.applyResponsiveColumns(t,e,o)},250)})}applyResponsiveColumns(t,e,o){window.innerWidth<=this.mobileBreakpoint?this.setColumns("2",e,o,!0):this.setColumns(t,e,o,!1)}setColumns(t,e,o,s=!1){t&&["2","3","4"].includes(t)||(t="4"),e.addClass("view-transitioning"),e.attr("data-columns",t),!s&&o&&o.length&&(o.removeClass("active"),o.filter(`[data-columns="${t}"]`).addClass("active")),e[0]&&e[0].offsetHeight,setTimeout(()=>{e.removeClass("view-transitioning")},300)}}t(function(){new e})}(jQuery),function(t){"use strict";class e{constructor(){this.mobileBreakpoint=767,this.init()}init(){this.initColumnToggle(),this.initResponsiveHandler()}initColumnToggle(){const e=t(".column-toggle"),o=t(".woocommerce ul.products, .woocommerce-page ul.products");if(!e.length||!o.length)return;const s=localStorage.getItem("shopColumnsView")||"4";this.applyResponsiveColumns(s,o,e);const i=this;e.on("click",function(s){s.preventDefault();const n=t(this),a=n.attr("data-columns");a&&(e.removeClass("active"),n.addClass("active"),i.setColumns(a,o,e),localStorage.setItem("shopColumnsView",a))})}initResponsiveHandler(){const e=t(".woocommerce ul.products, .woocommerce-page ul.products"),o=t(".column-toggle");if(!e.length)return;const s=this;let i;t(window).on("resize",function(){clearTimeout(i),i=setTimeout(function(){const t=localStorage.getItem("shopColumnsView")||"4";s.applyResponsiveColumns(t,e,o)},250)})}applyResponsiveColumns(t,e,o){window.innerWidth<=this.mobileBreakpoint?this.setColumns("2",e,o,!0):this.setColumns(t,e,o,!1)}setColumns(t,e,o,s=!1){t&&["2","3","4"].includes(t)||(t="4"),e.addClass("view-transitioning"),e.attr("data-columns",t),!s&&o&&o.length&&(o.removeClass("active"),o.filter(`[data-columns="${t}"]`).addClass("active")),e[0]&&e[0].offsetHeight,setTimeout(()=>{e.removeClass("view-transitioning")},300)}}t(function(){new e})}(jQuery),function(){"use strict";const t=new WeakSet;class e{constructor(e,o={}){e&&(t.has(e)||(this.container=e,this.slidesContainer=e.querySelector(".testimonial-slides, .hero-slides, .slider-track"),this.slidesContainer&&(this.slides=Array.from(this.slidesContainer.querySelectorAll(".testimonial-slide, .hero-slide, .product-slide, .slider-item")),0!==this.slides.length&&(this.dotsContainer=e.querySelector(".slider-dots"),this.config={autoPlay:!1!==o.autoPlay,autoPlayDelay:o.autoPlayDelay||5e3,animationSpeed:o.animationSpeed||700,...o},this.currentIndex=0,this.isAnimating=!1,this.autoPlayInterval=null,this.direction="next",t.add(e),this.init()))))}init(){this.slides.forEach((t,e)=>{t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.transition=`transform ${this.config.animationSpeed}ms cubic-bezier(0.4, 0, 0.2, 1), opacity ${this.config.animationSpeed}ms ease`,0===e?(t.style.transform="translateX(0)",t.style.opacity="1",t.style.zIndex="2",t.classList.add("active")):(t.style.transform="translateX(100%)",t.style.opacity="0",t.style.zIndex="1",t.classList.remove("active"))}),this.updateContainerHeight(),this.createDots(),this.setupEventListeners(),this.config.autoPlay&&this.slides.length>1&&this.startAutoPlay(),this.container.classList.add("slider-initialized")}showSlide(t,e="next"){if(this.isAnimating)return;if(t<0||t>=this.slides.length)return;if(t===this.currentIndex)return;this.isAnimating=!0;const o=this.slides[this.currentIndex],s=this.slides[t];s.style.transform="translateX(100%)",s.style.opacity="1",s.style.zIndex="3",s.style.pointerEvents="none",s.offsetHeight,o.style.opacity="0",o.style.zIndex="2",o.style.pointerEvents="none",s.style.transform="translateX(0)",s.style.pointerEvents="auto",o.classList.remove("active"),s.classList.add("active"),this.currentIndex=t,this.updateDots(),this.updateContainerHeight(),setTimeout(()=>{o.style.zIndex="1",o.style.transform="translateX(100%)",this.isAnimating=!1},this.config.animationSpeed)}updateContainerHeight(){const t=this.slides[this.currentIndex];if(!t)return;const e=t.scrollHeight;e>0&&(this.slidesContainer.style.height=`${e}px`,this.slidesContainer.style.transition=`height ${this.config.animationSpeed}ms ease-in-out`)}createDots(){this.dotsContainer&&(this.slides.length<=1||(this.dotsContainer.innerHTML="",this.slides.forEach((t,e)=>{const o=document.createElement("button");o.className="slider-dot",o.type="button",o.setAttribute("aria-label",`Go to slide ${e+1}`),0===e&&o.classList.add("active"),o.addEventListener("click",()=>{const t=e>this.currentIndex?"next":"prev";this.goToSlide(e,t)}),this.dotsContainer.appendChild(o)}),this.dots=Array.from(this.dotsContainer.querySelectorAll(".slider-dot"))))}updateDots(){this.dots&&this.dots.forEach((t,e)=>{e===this.currentIndex?t.classList.add("active"):t.classList.remove("active")})}goToSlide(t,e=null){t!==this.currentIndex&&(e||(e=t>this.currentIndex?"next":"prev"),this.stopAutoPlay(),this.showSlide(t,e),this.config.autoPlay&&this.startAutoPlay())}nextSlide(){const t=(this.currentIndex+1)%this.slides.length;this.showSlide(t,"next")}prevSlide(){const t=(this.currentIndex-1+this.slides.length)%this.slides.length;this.showSlide(t,"prev")}startAutoPlay(){!this.config.autoPlay||this.slides.length<=1||(this.stopAutoPlay(),this.autoPlayInterval=setInterval(()=>{this.nextSlide()},this.config.autoPlayDelay))}stopAutoPlay(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.autoPlayInterval=null)}setupEventListeners(){this.container.addEventListener("mouseenter",()=>{this.stopAutoPlay()}),this.container.addEventListener("mouseleave",()=>{this.config.autoPlay&&this.startAutoPlay()}),document.addEventListener("visibilitychange",()=>{document.hidden?this.stopAutoPlay():this.config.autoPlay&&this.startAutoPlay()});let t,e=0,o=0;this.slidesContainer.addEventListener("touchstart",t=>{e=t.touches[0].clientX},{passive:!0}),this.slidesContainer.addEventListener("touchend",t=>{o=t.changedTouches[0].clientX;const s=e-o;Math.abs(s)>50&&(this.stopAutoPlay(),s>0?this.nextSlide():this.prevSlide(),this.config.autoPlay&&this.startAutoPlay())}),document.addEventListener("keydown",t=>{this.isInViewport()&&(t.target.matches("input, textarea, select")||("ArrowLeft"===t.key?(t.preventDefault(),this.stopAutoPlay(),this.prevSlide(),this.config.autoPlay&&this.startAutoPlay()):"ArrowRight"===t.key&&(t.preventDefault(),this.stopAutoPlay(),this.nextSlide(),this.config.autoPlay&&this.startAutoPlay())))}),window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{this.updateContainerHeight()},250)})}isInViewport(){const t=this.container.getBoundingClientRect();return t.top<window.innerHeight&&t.bottom>0&&t.left<window.innerWidth&&t.right>0}}if(void 0!==e){const t=e.prototype.goToSlide;e.prototype.goToSlide=function(e){t.call(this,e);const o=this.slides[e];this.handleVideoForSlide(o,e)},e.prototype.handleVideoForSlide=function(t,e){const o=t.querySelector(".hero-video-container");if(!o)return;const s=o.querySelector("video");if(s&&(this.slides.forEach((t,o)=>{if(o!==e){const e=t.querySelector("video");e&&e.pause()}}),s.paused)){const t=s.play();void 0!==t&&t.catch(t=>{console.log("Video autoplay prevented:",t)})}}}function o(){[".testimonial-slider",".hero-slider",".product-slider"].forEach(o=>{document.querySelectorAll(o).forEach(o=>{if(t.has(o))return;const s={autoPlay:"false"!==o.dataset.autoplay,autoPlayDelay:parseInt(o.dataset.delay)||5e3,animationSpeed:parseInt(o.dataset.speed)||700};new e(o,s)})})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o(),window.UniversalSlider=e}();class MacedonRangesTheme{constructor(){this.lastScroll=0,this.init()}init(){this.initNavigation(),this.initModals(),this.initAnimations(),this.initSliders(),this.initCart(),this.initMobileSubmenu(),"undefined"!=typeof wc_add_to_cart_params&&this.initWooCommerce()}initNavigation(){const t=document.querySelector(".mobile-menu-toggle"),e=document.querySelector(".mobile-menu"),o=document.querySelector(".site-header");t&&e&&(t.addEventListener("click",()=>{const o="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",!o),e.classList.toggle("active"),e.setAttribute("aria-hidden",o),document.body.classList.toggle("menu-open")}),document.addEventListener("keydown",o=>{"Escape"===o.key&&e.classList.contains("active")&&(t.setAttribute("aria-expanded","false"),e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.classList.remove("menu-open"))}),document.addEventListener("click",o=>{o.target.closest(".mobile-menu")||o.target.closest(".mobile-menu-toggle")||!e.classList.contains("active")||(t.setAttribute("aria-expanded","false"),e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.classList.remove("menu-open"))})),this.initStickyHeader(o),this.initSmoothScroll()}initStickyHeader(t){if(!t)return;let e=!1;window.addEventListener("scroll",()=>{e||(window.requestAnimationFrame(()=>{const o=window.pageYOffset;o>50?(document.body.classList.add("scrolled"),t.classList.add("is-sticky")):(document.body.classList.remove("scrolled"),t.classList.remove("is-sticky")),this.lastScroll=o,e=!1}),e=!0)},{passive:!0})}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){const e=this.getAttribute("href");if("#"===e||"#main"===e)return;const o=document.querySelector(e);if(o){t.preventDefault();const e=140,s=o.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:s,behavior:"smooth"})}})})}initMobileSubmenu(){const t=document.querySelector(".mobile-menu");if(!t)return;t.querySelectorAll(".menu-item-has-children").forEach(t=>{const e=t.querySelector("a"),o=t.querySelector(".sub-menu");if(e&&o){const s=document.createElement("button");s.className="submenu-toggle",s.setAttribute("aria-expanded","false"),s.setAttribute("aria-label","Toggle submenu"),s.innerHTML="<span></span>",e.after(s),s.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const i="true"===s.getAttribute("aria-expanded");t.parentElement.querySelectorAll(":scope > .menu-item-has-children").forEach(e=>{if(e!==t){e.classList.remove("submenu-open");const t=e.querySelector(".submenu-toggle"),o=e.querySelector(".sub-menu");t&&t.setAttribute("aria-expanded","false"),o&&o.classList.remove("active")}}),s.setAttribute("aria-expanded",!i),t.classList.toggle("submenu-open"),o.classList.toggle("active")})}})}initModals(){const t=document.querySelector(".search-toggle"),e=document.querySelector(".search-modal");t&&e&&(t.addEventListener("click",()=>{e.classList.add("active"),e.setAttribute("aria-hidden","false"),document.body.classList.add("modal-open");const t=e.querySelector('input[type="search"]');t&&setTimeout(()=>t.focus(),100)}),e.addEventListener("click",t=>{(t.target===e||t.target.closest(".search-modal-close"))&&this.closeSearchModal(e)}),document.addEventListener("keydown",t=>{"Escape"===t.key&&e.classList.contains("active")&&this.closeSearchModal(e)}))}closeSearchModal(t){t.classList.remove("active"),t.setAttribute("aria-hidden","true"),document.body.classList.remove("modal-open")}initAnimations(){if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),t.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".fade-in, .slide-up, .scale-in").forEach(e=>{t.observe(e)})}}initSliders(){const t=document.querySelector(".testimonial-slider");t&&this.initTestimonialSlider(t)}initTestimonialSlider(t){const e=t.querySelectorAll(".testimonial-slide"),o=t.querySelector(".slider-dots");if(!e.length||!o)return;let s,i=0;e.forEach((t,s)=>{const i=document.createElement("button");i.className="slider-dot "+(0===s?"active":""),i.setAttribute("aria-label",`Go to slide ${s+1}`),i.addEventListener("click",()=>this.goToSlide(s,e,o)),o.appendChild(i)});o.querySelectorAll(".slider-dot");const n=()=>{s=setInterval(()=>{const t=(i+1)%e.length;this.goToSlide(t,e,o)},5e3)};this.goToSlide=(t,o,s)=>{const n=o||e,a=s.querySelectorAll(".slider-dot");n[i].classList.remove("active"),a[i].classList.remove("active"),i=t,n[i].classList.add("active"),a[i].classList.add("active")},t.addEventListener("mouseenter",()=>clearInterval(s)),t.addEventListener("mouseleave",()=>n()),t.addEventListener("keydown",t=>{if("ArrowLeft"===t.key){const t=0===i?e.length-1:i-1;this.goToSlide(t,e,o)}else if("ArrowRight"===t.key){const t=(i+1)%e.length;this.goToSlide(t,e,o)}}),n()}initCart(){document.body.addEventListener("added_to_cart",()=>{this.updateCartCount(),this.showAddedToCartMessage()}),this.updateCartCount()}updateCartCount(){"undefined"!=typeof wc_cart_fragments_params&&fetch(wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),{method:"GET",credentials:"same-origin"}).then(t=>t.json()).then(t=>{if(t.fragments){const e=document.querySelectorAll(".cart-count");e.length&&t.fragments[".cart-count"]&&e.forEach(e=>{e.textContent=t.fragments[".cart-count"]})}}).catch(t=>console.error("Error updating cart:",t))}showAddedToCartMessage(){const t=document.createElement("div");t.className="added-to-cart-message",t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),t.innerHTML='\n            <div class="message-content">\n                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />\n                </svg>\n                <span>Product added to cart successfully!</span>\n            </div>\n        ',document.body.appendChild(t),setTimeout(()=>{t.classList.add("show")},100),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)},3e3)}initWooCommerce(){this.initQuickView(),this.initProductGallery(),this.initQuantityButtons()}initQuickView(){document.addEventListener("click",t=>{if(t.target.closest(".quick-view-btn")){t.preventDefault();const e=t.target.closest(".quick-view-btn").dataset.productId;this.openQuickView(e)}})}openQuickView(t){"undefined"!=typeof mr_ajax&&fetch(`${mr_ajax.url}?action=mr_quick_view&product_id=${t}&nonce=${mr_ajax.nonce}`).then(t=>t.json()).then(t=>{t.success&&this.showQuickViewModal(t.data)}).catch(t=>console.error("Quick view error:",t))}showQuickViewModal(t){const e=document.createElement("div");e.className="quick-view-modal",e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.innerHTML=t,document.body.appendChild(e),document.body.classList.add("modal-open"),e.addEventListener("click",t=>{(t.target===e||t.target.closest(".quick-view-close"))&&(e.remove(),document.body.classList.remove("modal-open"))});const o=t=>{"Escape"===t.key&&(e.remove(),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",o))};document.addEventListener("keydown",o);const s=e.querySelector(".single_add_to_cart_button");s&&s.addEventListener("click",t=>{t.preventDefault(),this.addToCartFromQuickView(e)})}addToCartFromQuickView(t){const e=t.querySelector("form.cart");if(!e)return;const o=new FormData(e);"undefined"!=typeof mr_ajax&&fetch(`${mr_ajax.url}?action=wc_ajax_add_to_cart&nonce=${mr_ajax.nonce}`,{method:"POST",body:o}).then(t=>t.json()).then(e=>{e.error&&e.product_url?window.location.href=e.product_url:e.fragments&&(this.updateCartFragments(e.fragments),this.showAddedToCartMessage(),setTimeout(()=>{t.remove(),document.body.classList.remove("modal-open")},1500))}).catch(t=>console.error("Add to cart error:",t))}updateCartFragments(t){Object.keys(t).forEach(e=>{document.querySelectorAll(e).forEach(o=>{o&&(o.innerHTML=t[e])})})}initProductGallery(){const t=document.querySelector(".woocommerce-product-gallery");if(!t)return;const e=t.querySelector(".wp-post-image"),o=t.querySelectorAll(".woocommerce-product-gallery__image");o.length>1&&o.forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();const i=t.querySelector("img").dataset.large||t.querySelector("img").src;e&&(e.src=i),o.forEach(t=>t.classList.remove("active")),t.classList.add("active")})})}initQuantityButtons(){document.querySelectorAll('input[type="number"].qty').forEach(t=>{if(t.closest(".quantity-wrapper"))return;const e=document.createElement("div");e.className="quantity-wrapper";const o=document.createElement("button");o.type="button",o.className="quantity-btn minus",o.innerHTML="−",o.setAttribute("aria-label","Decrease quantity");const s=document.createElement("button");s.type="button",s.className="quantity-btn plus",s.innerHTML="+",s.setAttribute("aria-label","Increase quantity"),t.parentNode.insertBefore(e,t),e.appendChild(o),e.appendChild(t),e.appendChild(s),o.addEventListener("click",()=>{const e=parseInt(t.min)||1,o=parseInt(t.value)||1;o>e&&(t.value=o-1,t.dispatchEvent(new Event("change",{bubbles:!0})))}),s.addEventListener("click",()=>{const e=parseInt(t.max)||1/0,o=parseInt(t.value)||0;o<e&&(t.value=o+1,t.dispatchEvent(new Event("change",{bubbles:!0})))})})}}document.addEventListener("DOMContentLoaded",()=>{new MacedonRangesTheme}),window.MacedonRangesTheme=MacedonRangesTheme,function(t){"use strict";t(document).ready(function(){!function(){const e=new URLSearchParams(window.location.search);let o=!1;for(let t of e.keys())if(t.startsWith("attribute_")){o=!0;break}o||t(".variations select").each(function(){t(this).val("").trigger("change")})}(),t(".variations select").each(function(){const e=t(this),o=e.attr("name");if(!o||!o.toLowerCase().includes("color"))return;const s=t('<div class="color-swatches"></div>');e.find("option").each(function(){const o=t(this),i=o.val(),n=o.text();if(!i)return;const a=function(t){const e={black:"#000000",white:"#ffffff",red:"#ef4444",blue:"#3b82f6",green:"#10b981",yellow:"#fbbf24",purple:"#7c3aed",pink:"#ec4899",orange:"#f97316",gray:"#6b7280",grey:"#6b7280",brown:"#92400e",navy:"#1e3a8a",teal:"#14b8a6",cyan:"#06b6d4",lime:"#84cc16",indigo:"#6366f1",violet:"#8b5cf6",fuchsia:"#d946ef",rose:"#f43f5e",amber:"#f59e0b",emerald:"#059669",sky:"#0ea5e9",slate:"#64748b"},o=t.toLowerCase().trim();return o.startsWith("#")?o:e[o]||"#7c3aed"}(i),r=t('<div class="color-swatch"></div>');r.attr("data-value",i),r.attr("title",n),r.css("background-color",a),function(t){const e=t.replace("#",""),o=parseInt(e.substr(0,2),16),s=parseInt(e.substr(2,2),16),i=parseInt(e.substr(4,2),16);return(299*o+587*s+114*i)/1e3>200}(a)&&r.css("border","2px solid #e5e7eb"),r.on("click",function(){s.find(".color-swatch").removeClass("selected"),t(this).addClass("selected"),e.val(i).trigger("change")}),s.append(r)}),e.hide().after(s);const i=e.val();i&&""!==i&&s.find(`[data-value="${i}"]`).addClass("selected")}),t(".variations select").each(function(){const e=t(this),o=e.attr("name");if(!o||!o.toLowerCase().includes("size"))return;const s=t('<div class="size-buttons"></div>');e.find("option").each(function(){const o=t(this),i=o.val(),n=o.text();if(!i)return;const a=t('<button type="button" class="size-button"></button>');a.attr("data-value",i),a.text(n),o.is(":disabled")&&a.prop("disabled",!0),a.on("click",function(o){o.preventDefault(),t(this).prop("disabled")||(s.find(".size-button").removeClass("selected"),t(this).addClass("selected"),e.val(i).trigger("change"))}),s.append(a)}),e.hide().after(s);const i=e.val();i&&""!==i&&s.find(`[data-value="${i}"]`).addClass("selected")})}),t(document).on("woocommerce_update_variation_values",function(){t(".size-buttons .size-button").each(function(){const e=t(this),o=e.data("value");e.parent().prev("select").find(`option[value="${o}"]`).is(":disabled")?e.prop("disabled",!0):e.prop("disabled",!1)})})}(jQuery),function(t){"use strict";class e{constructor(){this.init()}init(){this.initQuickView(),this.initProductFilters(),this.initQuantityButtons(),this.initWishlist(),this.initCompare(),this.initAjaxAddToCart(),this.initCartDrawer(),this.initProductTabs(),this.initColorSwatches()}initQuickView(){t(document).on("click",".quick-view-btn",function(e){e.preventDefault();const o=t(this).data("product-id");if(!o)return;const s=t(this),i=s.text();s.text("Loading...").prop("disabled",!0),t.ajax({url:mr_ajax.ajax_url,type:"POST",data:{action:"mr_quick_view",product_id:o,nonce:mr_ajax.nonce},success:function(e){if(e.success){const o=t('<div class="quick-view-modal">'+e.data.html+"</div>");t("body").append(o),o.find(".woocommerce-product-gallery").wc_product_gallery(),setTimeout(()=>o.addClass("visible"),10),o.on("click",".quick-view-close, .quick-view-overlay",function(){o.removeClass("visible"),setTimeout(()=>o.remove(),300)})}},error:function(){window.MRAnimations&&window.MRAnimations.showNotification("Failed to load product","error")},complete:function(){s.text(i).prop("disabled",!1)}})})}initProductFilters(){const e=t(".product-filters");if(!e.length)return;const o=e.find(".price-slider");if(o.length&&t.fn.slider){const e=parseInt(o.data("min"))||0,s=parseInt(o.data("max"))||1e3;o.slider({range:!0,min:e,max:s,values:[e,s],slide:function(e,o){t(".price-range-display").text(`$${o.values[0]} - $${o.values[1]}`)}})}e.on("submit","form",function(e){e.preventDefault();const o=t(this).serialize();t(".products").addClass("loading"),t.ajax({url:mr_ajax.ajax_url,type:"POST",data:o+"&action=mr_filter_products",success:function(e){e.success&&(t(".products").html(e.data.html),history.pushState&&history.pushState(null,null,"?"+o))},complete:function(){t(".products").removeClass("loading")}})}),e.on("click",".clear-filters",function(t){t.preventDefault(),e.find("form")[0].reset(),e.find("form").submit()})}initQuantityButtons(){t(document).on("click",".quantity-btn",function(e){e.preventDefault();const o=t(this),s=o.siblings(".qty"),i=parseInt(s.val())||0,n=parseInt(s.attr("min"))||1,a=parseInt(s.attr("max"))||999;let r=i;o.hasClass("quantity-plus")?r=i<a?i+1:a:o.hasClass("quantity-minus")&&(r=i>n?i-1:n),s.val(r).trigger("change")})}initWishlist(){t(document).on("click",".add-to-wishlist",function(e){e.preventDefault();const o=t(this),s=o.data("product-id");o.addClass("loading"),t.ajax({url:mr_ajax.ajax_url,type:"POST",data:{action:"mr_toggle_wishlist",product_id:s,nonce:mr_ajax.nonce},success:function(e){e.success&&(o.toggleClass("in-wishlist"),window.MRAnimations&&window.MRAnimations.showNotification(e.data.message,"success"),t(".wishlist-count").text(e.data.count))},complete:function(){o.removeClass("loading")}})})}initCompare(){t(document).on("click",".add-to-compare",function(e){e.preventDefault();const o=t(this),s=o.data("product-id");t.ajax({url:mr_ajax.ajax_url,type:"POST",data:{action:"mr_toggle_compare",product_id:s,nonce:mr_ajax.nonce},success:function(e){e.success&&(o.toggleClass("in-compare"),window.MRAnimations&&window.MRAnimations.showNotification(e.data.message,"success"),t(".compare-count").text(e.data.count))}})})}initAjaxAddToCart(){t(document).on("click",".ajax-add-to-cart",function(e){e.preventDefault();const o=t(this),s=o.data("product-id"),i=o.data("quantity")||1;o.addClass("loading"),t.ajax({url:mr_ajax.wc_ajax_url.replace("%%endpoint%%","add_to_cart"),type:"POST",data:{product_id:s,quantity:i},success:function(e){e.error?window.MRAnimations&&window.MRAnimations.showNotification(e.error_message,"error"):(t(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,o]),window.MRAnimations&&window.MRAnimations.showNotification("Product added to cart!","success"))},complete:function(){o.removeClass("loading")}})})}initCartDrawer(){t(document).on("click",".cart-trigger",function(e){e.preventDefault(),t(".cart-drawer").addClass("open"),t("body").addClass("cart-drawer-open")}),t(document).on("click",".cart-drawer__close, .cart-drawer__overlay",function(){t(".cart-drawer").removeClass("open"),t("body").removeClass("cart-drawer-open")})}initProductTabs(){const e=t(".woocommerce-tabs");if(!e.length)return;let o=0;if(e.find(".tabs li a").on("click",function(e){e.preventDefault(),e.stopPropagation(),o=t(window).scrollTop();const s=t(this),i=s.attr("href");return s.closest("li").addClass("active").siblings().removeClass("active"),t(i).show().addClass("active").siblings(".woocommerce-Tabs-panel").hide().removeClass("active"),s.attr("aria-selected","true").attr("tabindex","0"),s.closest("li").siblings().find("a").attr("aria-selected","false").attr("tabindex","-1"),setTimeout(function(){t(window).scrollTop(o)},0),!1}),window.location.hash&&-1!==window.location.hash.indexOf("tab-")){const e=t(window).scrollTop();setTimeout(function(){t(window).scrollTop(e)},1)}t(window).on("hashchange",function(e){const o=window.location.hash;if(o&&-1!==o.indexOf("tab-")){const e=t(window).scrollTop(),s=t('.tabs li a[href="'+o+'"]');return s.length&&(s.trigger("click"),t(window).scrollTop(e)),!1}})}initColorSwatches(){t(document).on("click",".variation-swatch",function(e){e.preventDefault();const o=t(this),s=o.data("value");o.closest(".variations").find("select").val(s).trigger("change"),o.addClass("selected").siblings().removeClass("selected")})}}t(function(){new e})}(jQuery);